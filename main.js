/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var E=(s,i)=>{for(var e in i)c(s,e,{get:i[e],enumerable:!0})},S=(s,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of u(i))!w.call(s,n)&&n!==e&&c(s,n,{get:()=>i[n],enumerable:!(t=m(i,n))||t.enumerable});return s};var f=s=>S(c({},"__esModule",{value:!0}),s);var k={};E(k,{default:()=>r});module.exports=f(k);var a=require("obsidian"),P={intentionPath:"intentions"},r=class extends a.Plugin{createNote(e,t,n){return new Promise((o,p)=>{this.app.vault.create(`${e}.md`,t).then(l=>{n!=null&&this.app.fileManager.processFrontMatter(l,g=>{Object.assign(g,n)}).then(g=>{console.log(`Applied properties to "${l.name}"`),console.log(n),o()})}).catch(l=>{p(l)})})}async onload(){await this.loadSettings(),this.addStatusBarItem().setText("NS Tools active"),this.addCommand({id:"sample-editor-command",name:"Sample editor command",editorCallback:(t,n)=>{console.log(t.getSelection()),t.replaceSelection("Sample Editor Command")}}),this.addCommand({id:"intention-from-selection",name:"Create intention from selection",editorCallback:async t=>{let n=t.getSelection(),o=await this.createIntention(n);t.replaceSelection(`[[${o}|${n}]]`)}}),this.addCommand({id:"task-from-selection",name:"Create task note from selected text",editorCallback:t=>{let n=`${t.getSelection()}`,o=t.getSelection();this.createTask(o)}}),this.addCommand({id:"create-task-popup",name:"Create task",callback:()=>{new d(this.app,"Create Task",t=>console.log(t)).open()}}),this.addSettingTab(new h(this.app,this))}async createIntention(e){if(this.settings.intentionPath===""){new a.Notice("No intention path defined");return}this.app.vault.getFolderByPath(this.settings.intentionPath)||await this.app.vault.createFolder(this.settings.intentionPath);let t=`Intention-${Date.now()}`;return await this.createNote(`${this.settings.intentionPath}/${t}`,e,{"intention date":new Date,"intention statement":e,Stage:"created"}),t}createTask(e){this.createNote(e,e,{"Target Date":new Date})}onunload(){}async loadSettings(){this.settings=Object.assign({},P,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},d=class extends a.Modal{constructor(e,t,n){super(e);this.setTitle(t),this.contentEl.createEl("input",{type:"text",cls:"stringInput"}),this.containerEl.addEventListener("keydown",o=>{console.log(o),o.key=="Enter"&&(this.close(),n(this.inputString))})}};var h=class extends a.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new a.Setting(e).setName("Intention Path").setDesc("Path for intention notes").addText(t=>t.setPlaceholder("Enter path").setValue(this.plugin.settings.intentionPath).onChange(async n=>{this.plugin.settings.intentionPath=n,await this.plugin.saveSettings()}))}};
